#自己写一个 Web 服务器

​	

1. 网络与常用 IP
2. 一个最简单的 Node.js `Server`
3. HTML & CSS & JS & JSON 的本质



### 网络与 IP

​	`HTTP 协议的底层其实是由 TCP 协议和 IP 协议（简称 TCP/IP）构建的。			`

	> ## TCP 传输控制协议（Transmission Control Protocol）
	>
	> 1. [TCP 和 UDP 的区别是什么](https://www.nowcoder.com/questionTerminal/63c8b45c91a544bd8febc1f1ff02e3b5?toCommentId=73766)
	>    简答：TCP 可靠(返回成功和失败)、面向连接、相对 UDP 较慢；UDP 不可靠，不面向连接、相对 TCP 较快。搞定。
	>
	> 2. TCP 的三次握手指的是什么
	>
	>    简答：每次建立连接前，客户端和服务端之前都要先进行三次对话才开始正式传输内容，三次对话大概是这样的：
	>
	>    ```
	>     1. 客户端：我要连接你了，可以吗
	>     2. 服务端：嗯，我准备好了，连接我吧
	>     3. 客户端：那我连接你咯。
	>     4. 开始后面步骤
	>    ```

## IP 网络协议

> - 只要路由器连上电信的服务器，那么路由器就会有一个「外网 IP」，比如「14.17.32.211」就是一个外网 IP。这就是你在互联网中的地址。
>   - 最大 255
> - 但是如果你重启路由器，那么你很有「可能」被重新分配一个「外网 IP」，也就是说 **你的路由器没有「固定的外网 IP」**
> - 你可以花每年几千块钱租用一个「固定的外网 IP」。像腾讯、阿里这样的大公司租用了很多外网 IP，这样才能对我们提供稳定的服务。
> - 但是有个问题，你的路由器的外网 IP 如果是14.17.32.211，那么你的手机和电脑的 IP 又是什么呢？答案是「内网 IP」
> - 路由器会在你家里创建一个内网，内网中的设备使用内网 IP，一般来说这个 IP 的格式都是 192.168.xxx.xxx。
>   - 一般路由会给自己分配一个好记的内网 IP，如 192.168.1.1
>   - 然后路由会给每一个内网中的设备分配一个不同的内网 IP，如电脑是 192.168.1.2，手机是 192.168.1.3，以此类推。
>   - 现在路由器有两个 IP，一个外网 IP（14.17.32.211）和一个内网 IP（192.168.1.1）
>     - 内网可以相互访问，进外网必须经过路由器器
>     - 外网可以相互访问，但不能访问内网
>       - 路由器就是一个指路人，这就是「路由」两个字的来历。
>       - 路，就是「必由之路」中的路。由，就是「必由之路」中的由（由是经过、缘由的意思）。所有的信息都要经过路由器，然后被指向一条它该去的路。
>       - 也就是说内网和外网就像两个隔绝的空间，无法互通，唯一的联通点就是路由器（因为路由器既有外网 IP 也有内网 IP），所以路由器有时候也被叫做「网关」，这个「关」是「一夫当关，万夫莫开」的「关」。如果路由器到电信的连接中断了，那么内网中所有的设备也就无法上网了。
>     - 除了内网 IP 和外网 IP，还有两个特别特殊的 IP，就是本地 IP：127.0.0.1。本地 IP 永远表示设备自己。不信你可以 ping 127.0.0.1 一下，
>     - 默认情况下，hosts 文件里会有一行`127.0.0.1 localhost`，意思就是 localhost 指向 127.0.0.1，所以 localhost 也表示设备自己。不信你 ping localhost 试试，会发现实际上是在 ping 127.0.0.1
>     - 还有一个特别特殊的 IP：0.0.0.0，它不表示任何设备。这个 IP 不同的地方含义不同，以后我们会用到，用到的时候再说意思。

### 端口

> 你想要访问一个设备，只指定 IP 是不够的，还**必须**指定端口（Port）。
>
> 端口其实就是一个编号，并不是一种硬件。
>
> 一个服务器提供多种服务：HTTP 服务，又提供 FTP 服务，还提供 SMTP 服务（邮件服务），
>
> `所以这里有一个重要的原则：一个端口对应一个服务。`
>
>  - http 对应 80
>
>  - https 对应 443
>
>  - ftp 对应 21
>
>    
>
>    一共由多少端口？
>
>    每个机器一共有 65535（2的16次方减1）个端口（这是协议规定的）。
>
>    1. 0 到 1023（2的10次方减1）号端口是留给系统使用的，你只有拥有了管理员权限后，才能使用这 1024 个端口。
>
>    2. 其他端口可以给普通用户使用
>
>    3. 如果一个端口正在提供服务，也就是被占用了，那么就不能再使用这个端口。除非你先停掉正在占用这个端口的服务。以后你们会经常遇到这个问题。
>
>       
>
>    ​    

总结

---------

1. http 的底层是 tcp/ip    

​           使用 HTTP 协议访问另一个 IP 时，必须同时提供` IP 和端口号，缺一不可`。

2. 我访问 [http://qq.com](http://qq.com/) 时并没有提供端口号，为什么我依然可以访问

   因为**浏览器**帮你加了默认端口号 80。 htttp://qq.com:80	

3. 内网  - 路由 -外网

4. 特殊的 ip 地址

    - 127.0.0.1   本地localhost
    - 0.0.0.0   特殊情况下用